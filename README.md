# openweathermap_api

Сервис для сбора и сохранения данных о погоде в крупнейших городах мира.

## Запуск

Клонировать репозиторий:

```bash

git clone https://github.com/Kasaress/openweathermap_api.git

```

Перейти в корневую папку:

```bash

cd openweathermap_api

```

Создать виртуальное окружение:

```bash

python3 -m venv venv

```

Активировать виртуальное окружение:

```bash

. venv/bin/activate

```

Установить завимости:

```bash

pip install -r requirements.txt

```

Запустить приложение:

```bash

python app.py

```

## Функционал

Сразу после запуска, приложение вычитывает крупнейшие города из списка в файле largest_cities, запрашивает по API их координаты и сохраняет в базу.
Планировщику задач назначается регулярная задача на сбор данных о погоде в городах, сохраненных в базе.
Частота выполнения задачи устанавливается в файле config.yaml по ключу scheduler_interval.
Для удобства проверки сейчас установлена частота сбора 1 минута.

При выполнении задачи приложение пишет в лог обновленные данные.

## Технологии

Python 3.10, Flask, Sqlalchemy, Flask-APScheduler, SQLite

## Технологические ограничения

Если городов будет значительно больше 50, или если их нужно будет обновлять не раз в час, а каждую минуту, например, код будет необходимо переписать на конкурентный.
Если потребуются исторические данные о погоде в городах - нужно будет внести изменения в модели и код, сейчас сохраняется только последняя погода.

## Возможности расширения функциональности

Если потребуется не только температура, а, например еще влажность - код легко доработать - нужно будет добавить по одному полю в модели города и погоды и пару новых методов в менеджеры.
